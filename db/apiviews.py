import json

from rest_framework import generics
from rest_framework import status
from rest_framework.response import Response
from rest_framework.views import APIView

from .models import Person
from .serializers import PersonSerializer


class PersonList(generics.ListCreateAPIView):
    queryset = Person.objects.all()
    serializer_class = PersonSerializer


class PersonDetail(generics.RetrieveDestroyAPIView):
    queryset = Person.objects.all()
    serializer_class = PersonSerializer


class CreatePerson(APIView):
    serializer_class = PersonSerializer

    def post(self, request):
        json_data = json.loads(request.body)  # request.raw_post_data w/ Django < 1.4
        try:
            name = json_data['name']
            embeddings = json_data["embeddings"]

            p = Person()
            # p.name = name
            p.name = "luis"
            # p.embeddings = embeddings
            p.embeddings = [0.00924892, -0.004452533, 0.005193363, 0.021951219, 0.04299797, 0.030467527, 0.040431935, 0.028612444, 0.080233686, -0.15749218, 0.052077986, -0.00947621, 0.04607097, -0.069034375, -0.047664918, 0.01801791, -0.09195986, 0.033924557, 0.021917183, 0.043775614, -0.02299328, -0.04050075, 0.0003956511, -0.008479467, -0.011536053, -0.008797613, 0.03158165, -0.025487183, 0.026225721, -0.06272668, 0.01209277, -0.043812692, -0.017613104, 0.037885424, 0.044947907, -0.06779019, -0.045329817, -0.050718706, 0.04999339, 0.026946323, -0.0340239, 0.03212461, -0.040696673, -0.009745607, 0.017778598, 0.013795062, 0.024186345, -0.06397269, -0.02090041, -0.004018553, 0.016500423, 0.034366786, -0.016327312, 0.027513368, -0.022573147, -0.084439404, -0.059878945, -0.0007783945, 0.061005462, 0.019803125, -0.030552654, 0.1037766, -0.0033694294, 0.02332944, -0.003940059, 0.08854325, -0.04561762, -0.0243875, -0.005203849, 0.0048178285, 0.010704562, 0.035699725, -0.05658038, 0.021160716, -0.0024277514, -0.09560624, 0.029561644, 0.015087201, -0.045683816, -0.0685529, 0.030030232, -0.02875688, -0.0047117467, -0.030812437, -0.101939164, 0.018044757, 0.008099371, -0.053157665, 0.015513738, -0.02480942, -0.00497708, 0.104400486, 0.0016719718, -0.042793293, -0.0016077876, 0.009981238, 0.054745436, 0.023496734, 0.027535686, 0.15251587, 0.010252302, 0.010924486, -0.029830715, -0.086316794, 0.010644977, 0.036244355, -0.056597814, -0.006936378, 0.023553438, 0.03719953, 0.026779784, -0.021954456, -0.009738977, -0.019705297, -0.021297732, -0.013813578, -0.023527391, -0.03847621, 0.045162845, -0.0644139, 0.042278543, 0.017637832, -0.00058415753, 0.004778616, 0.020020524, -0.03826121, 0.037974034, 0.007576607, 0.0069238264, -0.0087992875, -0.040962603, -0.040517483, 0.04884984, 0.040016647, 0.0539761, 0.015305322, 0.02559878, -0.0031273838, 0.09455054, 0.070788115, 0.046328243, 0.042038366, 0.009475186, -0.019894471, 0.013569073, -0.028928837, -0.016221086, 0.021977667, -0.02938942, -0.005574365, 0.071907885, 0.05815888, 0.0145435715, 0.019673018, 0.026228305, 0.06591415, 0.014067539, 0.0006777283, -0.066090755, 0.027643612, -0.09387593, -0.01951287, 0.063587576, -0.016925348, 0.031167945, 0.011364928, -0.035917662, 0.06410435, -0.07311895, 0.026534833, 0.0018161468, -0.014689812, 0.0052386504, -0.03387589, 0.046347424, -0.014081118, -0.027848566, -0.02972532, -0.014915936, 0.051447444, -0.029388905, -0.016555939, 0.03373387, 0.04014433, 0.06261344, 0.09527877, 0.068454206, 0.0059049004, -0.024583336, -0.06174381, -0.0057221116, 0.061248854, -0.03916359, 0.058415174, 0.07957223, 0.038379453, -0.04212776, -0.0730294, 0.050243277, -0.05607972, -0.038704284, -0.058751203, 0.03208172, 0.012627816, -0.07585102, 0.03706409, 0.03618451, 0.031553198, 0.032990742, 0.08430207, -0.10050356, 0.04243714, -0.047323965, 0.049788546, -0.015857985, 0.025364406, 0.026445068, -0.021735765, -0.08840007, -0.023961972, -0.008788202, 0.03574959, 0.00915978, 0.06720716, -0.034861565, -0.0717347, -0.06386729, -0.017496431, -0.007908501, -0.02020947, -0.030917974, 0.04074474, 0.0316659, 0.08909618, 0.016583199, -0.028714769, 0.046056174, 0.020714037, -0.015216788, -0.023677172, -0.0001193941, 0.01458885, 0.036887024, -0.08428099, 0.0024549202, -0.03147289, -0.028074471, -0.022083579, -0.020119777, -0.02457699, -0.005086074, -0.027975908, -0.028864304, -0.0988126, -0.03813025, 0.0329787, -0.041124314, 0.014670978, 0.0088933, 0.0609027, 0.01017073, 0.084649876, -0.017641898, 0.017890343, -0.007998743, -0.026746072, -0.025916716, 0.04385052, 0.08262556, 0.050686125, 0.028215602, 0.064581804, -0.06642895, -0.032648258, 0.0133977, -0.0091611855, -0.004644344, 0.057866074, -0.017605998, -0.089756764, 0.04770593, 0.012799632, -0.067070454, -0.071675055, 0.013426689, 0.102198124, -0.0036988275, 0.019888747, -0.036208063, 0.01617783, 0.021101903, -0.02696638, -0.008723735, -0.06457289, -0.0404652, -0.002423232, -0.051308166, -0.12800586, -0.087543614, -0.045221996, -0.0064525725, -0.050723936, -0.07866044, -0.028373262, 0.036916897, 0.02021131, -0.016404733, 0.00020761351, -0.02969583, -0.04708173, -0.021552887, 0.023602402, 0.023334553, -0.023787815, 0.033089947, -0.048546825, 0.011017388, -0.036410484, -0.03480763, 0.053622123, 0.02411212, -0.018008737, -0.018783458, -0.02668451, -0.011249781, 0.0060603446, -0.007381181, -0.019073881, 0.010914542, 0.037567843, -0.0550178, -0.022908518, -0.064765744, 0.019211132, 0.03103953, 0.0030659807, 0.011179206, 0.033333004, 0.011332327, 0.058131833, 0.05409209, 0.12019212, -0.017107142, -0.034528032, 0.022564087, 0.010270987, -0.0398162, 0.042629063, -0.0366865, -0.022954753, -0.016714375, -0.013336688, 0.07927441, -0.060357656, 0.0817826, -0.05813508, 0.050694175, 0.0076228613, -0.0376968, -0.05004671, 0.01417857, -0.019027533, 0.031727206, -0.022864895, 0.060935996, -0.06270799, 0.054988526, 0.012570768, -0.03816309, 0.042037554, -0.05368945, 0.07184272, -0.019280324, 0.014276335, -0.0141355, 0.015467636, 0.00741066, 0.035248417, 0.002016714, -0.044658307, 0.02644046, 0.010123864, -0.045997795, 0.0044094785, 0.044053014, -0.011932973, 0.038439535, -0.010835976, -0.038636643, 0.04336073, -0.0027786489, -0.09910714, -0.09398371, 0.0077314884, 0.05284288, 0.04748539, -0.035211973, 0.10124736, 0.025906038, -0.015378442, 0.02202532, -0.06242697, -0.0033254137, 0.01453585, -0.022822859, 0.010220727, -0.07465386, -0.021221027, 0.032701302, 0.01178051, 0.0058298665, 0.019050017, 0.0006902739, -0.015584937, -0.06320437, -0.06965543, 0.049470287, 0.013090995, -0.06358784, -0.022629755, -0.07145119, -0.004880507, -0.0115567995, 0.021620743, 0.009264462, 0.031691495, -0.0715405, -0.059696373, -0.11036415, -0.019139921, 0.03680885, -0.10417726, 0.03123929, 0.02519119, 0.06184505, -0.02280035, -0.00930676, 0.015779663, 0.012411167, 0.10604171, -0.07675407, 0.03145029, -0.03537678, -0.08552367, -0.031917818, -0.0060772873, 0.0038531676, 0.009888076, -0.057474103, -0.00604131, 0.058340207, -0.0006950296, -0.0070031625, -0.05957461, 0.044535086, -0.019857865, 0.0039463635, -0.030536609, -0.030252816, -0.0024049974, 0.022834405, -0.026281435, -0.0025466096, 0.027430974, 0.0651173, -0.0853796, -0.025275497, -0.026602373, -0.086512335, -0.046819925, -0.022394566, 0.050653335, 0.049252614, -0.018708838, -0.035021186, -0.100504234, 0.07939388, -0.012108151, -0.044053018, -0.055483744, 0.0077883787, 0.0052009807, 0.045033246, 0.045642868, -0.06767464, -0.020407137, 0.037862908, 0.0011213926, 0.02635346, -0.0077103507, -0.012498881, -0.007748244, -0.0070695844, 0.05735837, 0.057622336, 0.048984155, -0.024642946, -0.012026313, 0.017019728, 0.07634577, 0.05118965, 0.03337008, -0.0064496757, -0.026493367, -0.022815961, -0.06919375, -0.0037612254, -0.08106748, -0.004530764, 0.0024761234, 0.014021821, 0.06408432]

            result = p.save()
        except KeyError:
            return Response(status=status.HTTP_400_BAD_REQUEST)
